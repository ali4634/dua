<!DOCTYPE html>
<html lang="ur" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#3498db"/>
    <meta name="description" content="Ø±ÙˆØ²Ù…Ø±Û Ú©ÛŒ Ø¯Ø¹Ø§Ø¦ÛŒÚº Ø³ÛŒÚ©Ú¾ÛŒÚºØŒ ÛŒØ§Ø¯ Ú©Ø±ÛŒÚº Ø§ÙˆØ± ØªÙ„Ø§Ø´ Ú©Ø±ÛŒÚºÛ”">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icon-192.png">
    <title>Ø±ÙˆØ²Ù…Ø±Û Ø¯Ø¹Ø§Ø¦ÛŒÚº Ø§ÛŒÙ¾</title>
    <style>
        /* Ø¢Ù¾ Ú©Ø§ Ø³Ø§Ø±Ø§ CSS Ú©ÙˆÚˆ ÙˆÛŒØ³Û’ ÛÛŒ Ø±ÛÛ’ Ú¯Ø§ */
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f5f5f5; margin: 0; padding: 20px; color: #333; }
        .container { max-width: 800px; margin: 0 auto; background-color: white; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1); padding: 20px; }
        h1 { font-family: 'Noto Nastaliq Urdu', 'Jameel Noori Nastaleeq', 'Pak Nastaleeq', serif; color: #2c3e50; text-align: center; margin-bottom: 30px; border-bottom: 2px solid #3498db; padding-bottom: 10px; }
        /* ... Ø¨Ø§Ù‚ÛŒ CSS ÙˆÛŒØ³Û’ ÛÛŒ ... */
        .dua-content { font-family: 'Noto Naskh Arabic', 'Amiri', 'Scheherazade New', serif; font-size: 24px; line-height: 1.8; text-align: center; color: #1a5276; }
        
        /* === Ù¹ÛŒØ³Ù¹Ù†Ú¯ Ú©Û’ Ù„ÛŒÛ’ Ø§Ø³Ù¹Ø§Ø¦Ù„ === */
        #debug-info {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background-color: #ffc107;
            color: black;
            padding: 10px;
            font-size: 14px;
            z-index: 9999;
            border-bottom: 2px solid #e0a800;
        }
    </style>
</head>
<body>
    <!-- === Ù¹ÛŒØ³Ù¹Ù†Ú¯ Ú©Û’ Ù„ÛŒÛ’ ÚˆÛŒØ¨Ú¯ Ø§ÛŒØ±ÛŒØ§ === -->
    <div id="debug-info">Ø§Ø³Ù¹ÛŒÙ¹Ø³: Ø§ÛŒÙ¾ Ø´Ø±ÙˆØ¹ ÛÙˆ Ø±ÛÛŒ ÛÛ’...</div>

    <div class="container">
        <!-- Ø¢Ù¾ Ú©Ø§ Ø³Ø§Ø±Ø§ HTML Ù…ÙˆØ§Ø¯ ÛŒÛØ§Úº ÛÛ’... -->
        <h1>ğŸ“¿ Ø±ÙˆØ²Ù…Ø±Û Ø¯Ø¹Ø§Ø¦ÛŒÚº Ø§ÛŒÙ¾</h1>
        <div class="search-container"><input type="text" id="search" placeholder="Ø¯Ø¹Ø§ ØªÙ„Ø§Ø´ Ú©Ø±ÛŒÚº..."></div>
        <div class="filter-buttons">
            <button class="filter-btn active" data-filter="all">ØªÙ…Ø§Ù… Ø¯Ø¹Ø§Ø¦ÛŒÚº</button>
            <button class="filter-btn" data-filter="memorized">ÛŒØ§Ø¯ Ø´Ø¯Û</button>
            <button class="filter-btn" data-filter="favorite">Ù¾Ø³Ù†Ø¯ÛŒØ¯Û</button>
        </div>
        <div id="duas-container"></div>
    </div>
    <button id="install-button">Ø§ÛŒÙ¾ Ø§Ù†Ø³Ù¹Ø§Ù„ Ú©Ø±ÛŒÚº</button>

    <script>
        // === Ù¹ÛŒØ³Ù¹Ù†Ú¯ Ú©Û’ Ù„ÛŒÛ’ ÚˆÛŒØ¨Ú¯ ÙÙ†Ú©Ø´Ù† ===
        const debugInfo = document.getElementById('debug-info');
        function logToScreen(message) {
            console.log(message); // Ú©Ù†Ø³ÙˆÙ„ Ù…ÛŒÚº Ø¨Ú¾ÛŒ Ù„Ø§Ú¯ Ú©Ø±ÛŒÚº
            if(debugInfo) {
                debugInfo.innerHTML += `<br>${message}`;
            }
        }

        try {
            logToScreen("Ø§Ø³Ú©Ø±Ù¾Ù¹ Ú†Ù„Ù†Ø§ Ø´Ø±ÙˆØ¹ ÛÙˆØ§Û”");

            const duasContainer = document.getElementById('duas-container');
            const searchInput = document.getElementById('search');
            const filterButtons = document.querySelectorAll('.filter-btn');
            const installButton = document.getElementById('install-button');

            logToScreen("ØªÙ…Ø§Ù… HTML Ø¹Ù†Ø§ØµØ± Ù…Ù„ Ú¯Ø¦Û’Û”");

            const duas = [ /* Ø¢Ù¾ Ú©ÛŒ ØªÙ…Ø§Ù… Ø¯Ø¹Ø§Ø¤Úº Ú©Ø§ ÚˆÛŒÙ¹Ø§ ÛŒÛØ§Úº ÛÛ’... */ ]; // ÚˆÛŒÙ¹Ø§ Ú©Ùˆ Ù…Ø®ØªØµØ± Ú©Ø± Ø¯ÛŒØ§ Ú¯ÛŒØ§ ÛÛ’

            logToScreen(`Ø¯Ø¹Ø§Ø¤Úº Ú©Ø§ ÚˆÛŒÙ¹Ø§ Ù…ÙˆØ¬ÙˆØ¯ ÛÛ’: ${duas.length} Ø¯Ø¹Ø§Ø¦ÛŒÚº Ù…Ù„ÛŒÚºÛ”`);
            
            function renderDuas(filter = 'all', searchTerm = '') {
                logToScreen("renderDuas ÙÙ†Ú©Ø´Ù† Ú†Ù„ Ø±ÛØ§ ÛÛ’Û” ÙÙ„Ù¹Ø±: " + filter);
                // ... Ø¢Ù¾ Ú©Ø§ Ø±ÛŒÙ†ÚˆØ±Ù†Ú¯ Ú©Ø§ Ø³Ø§Ø±Ø§ Ú©ÙˆÚˆ ÛŒÛØ§Úº ...
                duasContainer.innerHTML = ''; const categories = {}; duas.forEach(dua => { if (!categories[dua.category]) categories[dua.category] = []; categories[dua.category].push(dua); }); for (const [category, categoryDuas] of Object.entries(categories)) { const categoryDiv = document.createElement('div'); categoryDiv.className = 'category'; const categoryTitle = document.createElement('div'); categoryTitle.className = 'category-title'; categoryTitle.textContent = category; categoryDiv.appendChild(categoryTitle); categoryDuas.forEach(dua => { const memorized = localStorage.getItem(`dua-${dua.id}-memorized`) === 'true'; const favorite = localStorage.getItem(`dua-${dua.id}-favorite`) === 'true'; if (filter === 'all' || (filter === 'memorized' && memorized) || (filter === 'favorite' && favorite)) { const matchesSearch = searchTerm === '' || dua.title.includes(searchTerm) || dua.arabic.includes(searchTerm) || dua.translation.includes(searchTerm); if (matchesSearch) { const duaCard = document.createElement('div'); duaCard.className = 'dua-card'; duaCard.dataset.id = dua.id; duaCard.innerHTML = ` <div class="dua-title">${dua.title}</div> <div class="dua-content">${dua.arabic}</div> <div class="dua-translation">${dua.translation}</div> <div class="dua-actions"> <button class="btn btn-memorized ${memorized ? 'active' : ''}" data-id="${dua.id}" data-action="memorized"> ${memorized ? 'âœ“ ÛŒØ§Ø¯ ÛÙˆÚ¯Ø¦ÛŒ' : 'ÛŒØ§Ø¯ Ú©Ø±Ù†Ø§ ÛÛ’'} </button> <button class="btn btn-favorite ${favorite ? 'active' : ''}" data-id="${dua.id}" data-action="favorite"> ${favorite ? 'â˜… Ù¾Ø³Ù†Ø¯ÛŒØ¯Û' : 'Ù¾Ø³Ù†Ø¯ÛŒØ¯Û Ø¨Ù†Ø§Ø¦ÛŒÚº'} </button> </div>`; categoryDiv.appendChild(duaCard); } } }); if (categoryDiv.children.length > 1) duasContainer.appendChild(categoryDiv); }
                logToScreen("renderDuas ÙÙ†Ú©Ø´Ù† Ù…Ú©Ù…Ù„ ÛÙˆØ§Û”");
            }
            
            function setupEventListeners() {
                logToScreen("setupEventListeners ÙÙ†Ú©Ø´Ù† Ú†Ù„ Ø±ÛØ§ ÛÛ’Û”");
                // ... Ø¢Ù¾ Ú©Ø§ Ø§ÛŒÙˆÙ†Ù¹ Ù„Ø³Ù†Ø±Ø² Ú©Ø§ Ø³Ø§Ø±Ø§ Ú©ÙˆÚˆ ÛŒÛØ§Úº ...
                searchInput.addEventListener('input', e => { const activeFilter = document.querySelector('.filter-btn.active').dataset.filter; renderDuas(activeFilter, e.target.value); }); filterButtons.forEach(button => { button.addEventListener('click', () => { filterButtons.forEach(btn => btn.classList.remove('active')); button.classList.add('active'); renderDuas(button.dataset.filter, searchInput.value); }); }); duasContainer.addEventListener('click', e => { const button = e.target.closest('button'); if (button && (button.classList.contains('btn-memorized') || button.classList.contains('btn-favorite'))) { const id = button.dataset.id; const action = button.dataset.action; const key = `dua-${id}-${action}`; const isActive = localStorage.getItem(key) === 'true'; localStorage.setItem(key, !isActive); if (action === 'memorized') { button.textContent = !isActive ? 'âœ“ ÛŒØ§Ø¯ ÛÙˆÚ¯Ø¦ÛŒ' : 'ÛŒØ§Ø¯ Ú©Ø±Ù†Ø§ ÛÛ’'; } else { button.textContent = !isActive ? 'â˜… Ù¾Ø³Ù†Ø¯ÛŒØ¯Û' : 'Ù¾Ø³Ù†Ø¯ÛŒØ¯Û Ø¨Ù†Ø§Ø¦ÛŒÚº'; } button.classList.toggle('active'); const activeFilter = document.querySelector('.filter-btn.active').dataset.filter; if (activeFilter !== 'all') { renderDuas(activeFilter, searchInput.value); } } });
                logToScreen("setupEventListeners ÙÙ†Ú©Ø´Ù† Ù…Ú©Ù…Ù„ ÛÙˆØ§Û”");
            }
            
            let deferredPrompt; 
            window.addEventListener('beforeinstallprompt', (e) => {
                logToScreen("beforeinstallprompt Ø§ÛŒÙˆÙ†Ù¹ ÙØ§Ø¦Ø± ÛÙˆØ§Û” Ø§Ù†Ø³Ù¹Ø§Ù„ Ø¨Ù¹Ù† Ø¯Ú©Ú¾Ø§ÛŒØ§ Ø¬Ø§ Ø±ÛØ§ ÛÛ’Û”");
                e.preventDefault(); 
                deferredPrompt = e; 
                installButton.style.display = 'block'; 
                installButton.addEventListener('click', () => { installButton.style.display = 'none'; deferredPrompt.prompt(); deferredPrompt.userChoice.then((choiceResult) => { deferredPrompt = null; }); }); 
            });

            logToScreen("Ø§ÛŒÙ¾ Ú©Ùˆ Ø´Ø±ÙˆØ¹ Ú©ÛŒØ§ Ø¬Ø§ Ø±ÛØ§ ÛÛ’...");
            renderDuas();
            setupEventListeners();
            logToScreen("Ø§ÛŒÙ¾ Ú©Ø§Ù…ÛŒØ§Ø¨ÛŒ Ø³Û’ Ø´Ø±ÙˆØ¹ ÛÙˆ Ú¯Ø¦ÛŒÛ”");

        } catch (error) {
            logToScreen(`!!! Ø§ÛŒÚ© Ø®Ø±Ø§Ø¨ÛŒ ÙˆØ§Ù‚Ø¹ ÛÙˆØ¦ÛŒ: ${error.message}`);
        }
    </script>
    
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then(registration => {
                        console.log('Service Worker registered successfully:', registration);
                    })
                    .catch(err => {
                        console.error('Service Worker registration failed:', err);
                    });
            });
        }
    </script>
</body>
</html>
